<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ä‡∏∏‡∏î‡πÑ‡∏≠‡πÄ‡∏ó‡∏°‡πÉ‡∏´‡∏°‡πà</title>
  <link rel="stylesheet" href="/static/css/style.css" />
  <!-- **‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°** defer -->
  <script src="/static/js/newsetitems.js" defer></script>
</head>
<body>
  <h1>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ä‡∏∏‡∏î‡πÑ‡∏≠‡πÄ‡∏ó‡∏°‡πÉ‡∏´‡∏°‡πà</h1>

  <!-- ‚Äî ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ success ‡πÉ‡∏´‡πâ‡πÇ‡∏ä‡∏ß‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° ‚Äî -->
  {% if request.query_params.get("success") %}
    <div style="color: green; margin-bottom:1em;">
      ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à üéâ
    </div>
  {% endif %}

  <form id="itemSetForm" method="post" action="/newsetitems">
    <!-- ‚Äî ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Æ‡∏µ‡πÇ‡∏£‡πà ‚Äî -->
    <label for="heroSelect">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Æ‡∏µ‡πÇ‡∏£‡πà:</label>
    <select id="heroSelect" name="hero_id">
      {% for hero in heroes %}
        <option
          value="{{ hero.hero_id }}"
          data-icon="{{ hero.icon }}"
         {# ‡πÉ‡∏ä‡πâ bracket notation ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡πà‡∏≤‡∏ô key 'hero_id' ‡∏à‡∏≤‡∏Å dict #}
         {% if existing and existing['hero_id'] == hero.hero_id %}selected{% endif %}
        >
          {{ hero.hero_name }}
        </option>
      {% endfor %}
    </select>

    <!-- ‚Äî ‡∏ã‡πà‡∏≠‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏Æ‡∏µ‡πÇ‡∏£‡πà ‚Äî -->
    <input
      type="hidden"
      name="hero_name"
      id="heroName"
     {# ‡∏≠‡πà‡∏≤‡∏ô existing['hero_name'] ‡∏à‡∏≤‡∏Å dict #}
     value="{{ existing['hero_name'] if existing else heroes[0].hero_name }}"
    />

    <!-- ‚Äî ‡πÅ‡∏™‡∏î‡∏á‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏Æ‡∏µ‡πÇ‡∏£‡πà ‚Äî -->
    <div>
      <img
        id="heroIcon"
        {# ‡∏≠‡πà‡∏≤‡∏ô existing['hero_icon'] ‡∏à‡∏≤‡∏Å dict #}
       src="{{ existing['hero_icon'] if existing else heroes[0].icon }}"
        alt="Hero Icon"
        width="100"
      />
    </div>

    <!-- ‚Äî ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏≠‡πÄ‡∏ó‡πá‡∏° 6 ‡∏ä‡∏¥‡πâ‡∏ô ‚Äî -->
    <div class="items-row">
      {% for i in range(1,7) %}
        <div class="item-col">
          <label for="itemSelect{{ i }}">‡πÑ‡∏≠‡πÄ‡∏ó‡∏° {{ i }}:</label>
          <select id="itemSelect{{ i }}" name="item{{ i }}">
            <option value="">-- None --</option>
            {% for itm in items %}
              <option
                value="{{ itm.iteminfo.item_id }}"
                data-icon="{{ itm.iteminfo.icon }}"
               {# ‡πÉ‡∏ä‡πâ bracket notation ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á list 'items' #}
                {% if existing and existing['items'][i-1]['iteminfo']['item_id'] == itm.iteminfo.item_id %}
                 selected
               {% endif %}
              >
                {{ itm.iteminfo.item_name }}
              </option>
            {% endfor %}
          </select>

          <!-- ‚Äî ‡∏£‡∏π‡∏õ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡πÑ‡∏≠‡πÄ‡∏ó‡πá‡∏° ‚Äî -->
          <div>
            <img
              id="itemIcon{{ i }}"
              {# bracket notation ‡πÄ‡∏ä‡πà‡∏ô‡∏Å‡∏±‡∏ô #}
                src="{% if existing and existing['items'][i-1]['iteminfo']['icon'] %}{{ existing['items'][i-1]['iteminfo']['icon'] }}{% else %}{% endif %}"
              alt="Item Icon"
              width="80"
            />
          </div>
        </div>
      {% endfor %}
    </div>

    <button type="submit">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏≠‡πÄ‡∏ó‡∏°</button>
  </form>
</body>
</html>
